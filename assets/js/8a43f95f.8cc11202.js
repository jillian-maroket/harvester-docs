"use strict";(self.webpackChunkharvester_docs=self.webpackChunkharvester_docs||[]).push([[43405],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),s=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},c=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",v={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=d(e,["components","mdxType","originalType","parentName"]),p=s(r),u=a,m=p["".concat(l,".").concat(u)]||p[u]||v[u]||i;return r?n.createElement(m,o(o({ref:t},c),{},{components:r})):n.createElement(m,o({ref:t},c))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=u;var d={};for(var l in t)hasOwnProperty.call(t,l)&&(d[l]=t[l]);d.originalType=e,d[p]="string"==typeof e?e:a,o[1]=d;for(var s=2;s<i;s++)o[s]=r[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},38234:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>l});r(67294);var n=r(3905);const a={sidebar_position:6,sidebar_label:"Nvidia Driver Toolkit",title:"NVIDIA Driver Toolkit"},i=void 0,o={unversionedId:"advanced/addons/nvidiadrivertoolkit",id:"advanced/addons/nvidiadrivertoolkit",title:"NVIDIA Driver Toolkit",description:"Available as of v1.3.0",source:"@site/docs/advanced/addons/nvidiadrivertoolkit.md",sourceDirName:"advanced/addons",slug:"/advanced/addons/nvidiadrivertoolkit",permalink:"/v1.5/advanced/addons/nvidiadrivertoolkit",draft:!1,editUrl:"https://github.com/harvester/docs/edit/main/docs/advanced/addons/nvidiadrivertoolkit.md",tags:[],version:"current",lastUpdatedAt:1732780556,formattedLastUpdatedAt:"Nov 28, 2024",sidebarPosition:6,frontMatter:{sidebar_position:6,sidebar_label:"Nvidia Driver Toolkit",title:"NVIDIA Driver Toolkit"},sidebar:"api",previous:{title:"Managed DHCP",permalink:"/v1.5/advanced/addons/managed-dhcp"},next:{title:"Local Storage Support",permalink:"/v1.5/advanced/addons/lvm-local-storage"}},d={},l=[],s={toc:l},c="wrapper";function p({components:e,...t}){return(0,n.kt)(c,{...s,...t,components:e,mdxType:"MDXLayout"},(0,n.kt)("head",null,(0,n.kt)("link",{rel:"canonical",href:"https://docs.harvesterhci.io/v1.4/advanced/addons/nvidiadrivertoolkit"})),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Available as of v1.3.0")),(0,n.kt)("p",null,"nvidia-driver-toolkit is an add-on that allows you to deploy out-of-band NVIDIA GRID KVM drivers to your existing Harvester clusters."),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"The toolkit only includes the correct Harvester OS image, build utilities, and kernel headers that allow NVIDIA drivers to be compiled and loaded from the container. You must download the NVIDIA KVM drivers using a valid NVIDIA subscription. For guidance on identifying the correct driver for your NVIDIA GPU, see the ",(0,n.kt)("a",{parentName:"p",href:"https://www.nvidia.com/en-au/drivers/vgpu-software-driver/"},"NVIDIA documentation"),".")),(0,n.kt)("p",null,"The Harvester ISO does not include the nvidia-driver-toolkit container image. Because of its size, the image is pulled from Docker Hub by default. If you have an air-gapped environment, you can download and push the image to your private registry. The ",(0,n.kt)("strong",{parentName:"p"},"Image Repository")," and ",(0,n.kt)("strong",{parentName:"p"},"Image Tag")," fields on the ",(0,n.kt)("strong",{parentName:"p"},"nvidia-driver-toolkit")," screen provide information about the image that you must download."),(0,n.kt)("p",null,(0,n.kt)("img",{src:r(8269).Z,width:"2313",height:"509"})),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Each new Harvester version will be released with the correct nvidia-driver-toolkit image to ensure that all dependencies required to install the NVIDIA vGPU KVM drivers are available in the image.")),(0,n.kt)("p",null,"To enable the addon, users need to perform the following:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Provide the ",(0,n.kt)("inlineCode",{parentName:"li"},"Driver Location"),": which is an http location where nvidia vgpu kvm driver file is located (as shown in the example)"),(0,n.kt)("li",{parentName:"ul"},"update the ",(0,n.kt)("inlineCode",{parentName:"li"},"Image Repository")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"Image Tag")," if needed")),(0,n.kt)("p",null,"Once the addon is enabled, a nvidia-driver-toolkit daemonset is deployed to the cluster."),(0,n.kt)("p",null,"On pod startup, the entrypoint script will download the nvidia driver from the speificied ",(0,n.kt)("inlineCode",{parentName:"p"},"Driver Location"),", install the driver and load the kernel drivers."),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"PCIDevices")," addon can now leverage this addon to manage the lifecycle of the vGPU devices on nodes containing supported GPU ",(0,n.kt)("a",{parentName:"p",href:"/v1.5/advanced/vgpusupport"},"devices"),"."))}p.isMDXComponent=!0},8269:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/nvidia-driver-toolkit-0b8402112136eac0f408667ff01c3df7.png"}}]);